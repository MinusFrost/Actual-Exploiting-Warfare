--  // Library
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/miroeramaa/TurtleLib/main/TurtleUiLib.lua"))()
local window = library:Window("Window")

-- // Services & Instance Values
local Players = game:GetService("Players")

local chars = workspace:WaitForChild("Characters")

-- // Others
local size = 2

local boolshowcloaked = false

-- // Main Window & Window Functions
library:Keybind("P")

window:Slider("Hitbox Size",2,10,20, function(value)
	size = value
end)

window:Toggle("ESP: ", false, function(bool)
	if not bool then
		boolshowcloaked = false
	else
		boolshowcloaked = true
	end
end)

window:Label("Made by Frostnaut50.", Color3.fromRGB(157, 193, 196))

window:Label("Toggle visibility with P.", Color3.fromRGB(127, 143, 166))

window:Button("KillSwitch", function()
	library:Destroy()
end)

-- // Main Functions \\ --

-- Headshot Hitbox
local function ExpandHeadHitbox()
    for i, v in ipairs(chars:GetChildren()) do
		if v:IsA("Model") and v:FindFirstChild("UpperTorso") and v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Head") then
			v.Head.Size = Vector3.new(size, size, size)
		end
    end
end

-- ESP
local function DisplayPlayerBehindWalls()
	local character = chars:GetChildren() or chars.ChildAdded:Wait()
	local torso = character:WaitForChild("Head")
	
	-- Check if the Instance's ClassName is either a BasePart, UnionOperaion or a MeshPart.
	if torso:IsA("BasePart") or torso:IsA("UnionOperation") or torso:IsA("MeshPart") then 
		
		local highlight = Instance.new("Highlight")
		highlight.Name = "NormalHighlight"
		highlight.Adornee = torso
		highlight.Parent = torso
		highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
		highlight.FillColor = Color3.fromRGB(190, 190, 190)
		
		local label = Instance.new("BillboardGui")
		label.Name = "HighlightLabel"
		label.Size = UDim2.new(10, 0, 1, 0)
		label.Adornee = torso
		label.AlwaysOnTop = true
		label.StudsOffset = Vector3.new(0, 1.5, 0)
		label.Parent = torso
		
		local textLabel = Instance.new("TextLabel")
		textLabel.Name = "HighlightText"
		textLabel.Size = UDim2.new(1, 0, 1, 0)
		textLabel.Text = torso.Parent.Name
		textLabel.TextScaled = true
		textLabel.TextColor3 = Color3.new(1, 1, 1)
		textLabel.BackgroundTransparency = 1
		textLabel.Font = Enum.Font.SourceSansBold
		textLabel.Parent = label
		
		local textStroke = Instance.new("UIStroke")
		textStroke.Name = "TextStroke"
		textStroke.Parent = TextLabel
		textStroke.LineJoinMode = Enum.LineJoinMode.Miter
		textStroke.Color3 = Color3.new(0, 0, 0)
		textStroke.Thickness = 2
	end
	
	while true do
		if torso.Transparency > 0 then
			torso.Transparency = 0.2
		end
		
		task.wait(10^-100)
	end
	
	if not boolshowcloaked then
		highlight.Enabled = false
		label.Enabled = false
	else
		highlight.Enabled = true
		label.Enabled = true
	end
end

-- // Main Loop
while true do
	for _, player in ipairs(Players:GetPlayers()) do
		DisplayPlayerBehindWalls()
	end
	
	ExpandHeadHitbox()
	
	task.wait(0.8)
end

-- yandere dev please just try to improve your coding skills like me or you're just going to let your fanbase die because of your inconsequent actions, get a therapist, seriously.
-- you'll go homeless if you don't do something about it, people will stop funding your project if you keep up with your habits.